import{u as v,r as i,C as h,a as g,b as _,c as j,g as x,j as s,L as y,d as p,e as b,f as C,O}from"./index-44835d9b.js";import{u as P,H as S}from"./Header-1ab526d3.js";import{C as w,s as E}from"./scrollIntoView-7bca8b6e.js";const k=e=>e.city.name;function N(){return v(k)}const m=[{label:"Popular",value:"popular-desc"},{label:"Price: low to high",value:"price-asc"},{label:"Price: high to low",value:"price-desc"},{label:"Top rated first",value:"top-desc"}],f=i.memo(()=>{const e=Object.values(h),c=g(),n=N(),[l]=_(),{setCity:o}=b,r=j();return i.useEffect(()=>{if(l){const a=l.get("city");a&&r(o(a))}},[l,o]),i.useEffect(()=>{n||c(`${x()}?city=${h.Paris}`)},[n,c]),s.jsx("div",{className:"tabs",children:s.jsx("section",{className:"locations container",children:s.jsx("ul",{className:"locations__list tabs__list",children:e.map(a=>s.jsx("li",{className:"locations__item",children:s.jsx(y,{className:p("locations__item-link","tabs__item",{"tabs__item--active":n===a}),to:`${x()}?city=${a}`,children:s.jsx("span",{children:a})})},a))})})})}),R=(e,c)=>{i.useEffect(()=>{const n=l=>{e.current&&!e.current.contains(l.target)&&c()};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,c])},I=i.memo(()=>{const[e,c]=i.useState(!1),n=i.useRef(null),[l,o]=_(),r=i.useMemo(()=>m.find(d=>l.get("sort-by")===d.value)||m[0],[l]);R(n,()=>{e&&c(!1)});const a=i.useCallback(t=>{c(!1),o(d=>{const u=new URLSearchParams(d);return u.set("sort-by",t),u})},[o]);return s.jsxs("form",{className:"places__sorting",action:"#",method:"get",children:[s.jsx("span",{className:"places__sorting-caption",children:"Sort by"}),s.jsxs("span",{className:"places__sorting-type",tabIndex:0,onClick:()=>c(t=>!t),children:[r.label,s.jsx("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:s.jsx("use",{xlinkHref:"#icon-arrow-select"})})]}),s.jsx("ul",{className:p("places__options","places__options--custom",{"places__options--opened":e}),ref:n,children:m.map(t=>s.jsx("li",{onClick:()=>a(t.value),className:p("places__option",{"places__option--active":r.value===t.value}),tabIndex:0,children:t.label},t.value))})]})}),T=i.memo(()=>{const e=P(),c=j(),[n,l]=i.useState(null),[o]=_(),r=i.useCallback(t=>{l(t)},[]),a=N();return i.useEffect(()=>{a&&c(C(a))},[c,a,o]),s.jsxs("div",{className:"page page--gray page--main",children:[s.jsx(S,{}),(e==null?void 0:e.length)===0?s.jsxs("main",{className:"page__main page__main--index page__main--index-empty",children:[s.jsx("h1",{className:"visually-hidden",children:"Cities"}),s.jsx(f,{}),s.jsx("div",{className:"cities",children:s.jsxs("div",{className:"cities__places-container cities__places-container--empty container",children:[s.jsx("section",{className:"cities__no-places",children:s.jsxs("div",{className:"cities__status-wrapper tabs__content",children:[s.jsx("b",{className:"cities__status",children:"No places to stay available"}),s.jsx("p",{className:"cities__status-description",children:"We could not find any property available at the moment in Dusseldorf"})]})}),s.jsx("div",{className:"cities__right-section"})]})})]}):s.jsxs("main",{className:"page__main page__main--index",children:[s.jsx("h1",{className:"visually-hidden",children:"Cities"}),s.jsx(f,{}),s.jsx("div",{className:"cities",children:s.jsxs("div",{className:"cities__places-container container",children:[s.jsxs("section",{className:"cities__places places",children:[s.jsx("h2",{className:"visually-hidden",children:"Places"}),s.jsxs("b",{className:"places__found",children:[e.length," places to stay in"," ",a]}),s.jsx(I,{}),s.jsx("div",{className:"cities__places-list places__list tabs__content",children:s.jsx(O,{offers:e,onActiveOffer:r})})]}),s.jsx("div",{className:"cities__right-section",children:s.jsx(w,{city:a,offers:e,selectedOffer:n,onPointClick:t=>{E(`#${t}`)}})})]})})]})]})});export{T as default};
